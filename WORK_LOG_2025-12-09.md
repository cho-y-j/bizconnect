# ì‘ì—… ì¼ì§€ - 2025ë…„ 12ì›” 9ì¼

## ì‘ì—… ë‚ ì§œ
**2025ë…„ 12ì›” 9ì¼ (ì›”ìš”ì¼)**

---

## ì£¼ìš” ì„±ê³¼

### ì½œë°± SMS ë°œì†¡ ì„±ê³µ!
- Android 15 (Galaxy S22) í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°
- í†µí™” ì¢…ë£Œ í›„ ìë™ ë¬¸ì ë°œì†¡ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- 3ê°€ì§€ ì½œë°± ì´ë²¤íŠ¸ íƒ€ì… êµ¬í˜„ ì™„ë£Œ

---

## ìƒì„¸ ì‘ì—… ë‚´ìš©

### 1. Android 12+ / Android 13+ í˜¸í™˜ì„± ìˆ˜ì •
**íŒŒì¼**: `mobile/node_modules/react-native-get-sms-android/android/src/main/java/com/react/SmsModule.java`

#### ë¬¸ì œ
- Android 12+ (API 31+): `PendingIntent.FLAG_IMMUTABLE` í•„ìˆ˜
- Android 13+ (API 33+): `registerReceiver`ì— `RECEIVER_EXPORTED` ë˜ëŠ” `RECEIVER_NOT_EXPORTED` í”Œë˜ê·¸ í•„ìˆ˜

#### ìˆ˜ì • ì½”ë“œ
```java
// PendingIntent í”Œë˜ê·¸ ì¶”ê°€ (Android 12+)
int pendingFlags = Build.VERSION.SDK_INT >= Build.VERSION_CODES.S
    ? PendingIntent.FLAG_IMMUTABLE : 0;
PendingIntent sentPI = PendingIntent.getBroadcast(context, 0, new Intent(SENT), pendingFlags);

// registerReceiver í”Œë˜ê·¸ ì¶”ê°€ (Android 13+)
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {
    context.registerReceiver(new BroadcastReceiver() {
        // ... ì½œë°± ì½”ë“œ
    }, new IntentFilter(SENT), Context.RECEIVER_NOT_EXPORTED);
} else {
    context.registerReceiver(new BroadcastReceiver() {
        // ... ì½œë°± ì½”ë“œ
    }, new IntentFilter(SENT));
}
```

---

### 2. taskService.ts êµ¬ë¬¸ ì˜¤ë¥˜ ìˆ˜ì •
**íŒŒì¼**: `mobile/src/services/taskService.ts`

#### ë¬¸ì œ
- try ë¸”ë¡ì— catch ì ˆì´ ì—†ëŠ” êµ¬ë¬¸ ì˜¤ë¥˜

#### ìˆ˜ì •
```typescript
// ìˆ˜ì • ì „ (ë¼ì¸ 139)
this.subscription = channel;
}  // try ë¸”ë¡ë§Œ ìˆê³  catch ì—†ìŒ

// ìˆ˜ì • í›„
this.subscription = channel;
} catch (error) {
  console.error('Error in subscribeToTasks:', error);
}
```

---

### 3. babel.config.js ìƒì„±
**íŒŒì¼**: `mobile/babel.config.js`

```javascript
module.exports = {
  presets: ['module:@react-native/babel-preset'],
};
```

---

### 4. 3ê°€ì§€ ì½œë°± ì´ë²¤íŠ¸ íƒ€ì… êµ¬í˜„
**íŒŒì¼**: `mobile/src/lib/callbackManager.ts`

#### ìƒˆë¡œ ì¶”ê°€ëœ íƒ€ì…ê³¼ ì„¤ì •
```typescript
// ì½œë°± ì´ë²¤íŠ¸ íƒ€ì…
export type CallEventType = 'ended' | 'missed' | 'busy';

// ê¸°ë³¸ ë©”ì‹œì§€
const DEFAULT_MESSAGES = {
  ended: 'ì•ˆë…•í•˜ì„¸ìš”, ë°©ê¸ˆ í†µí™” ê°ì‚¬í•©ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì  ìˆìœ¼ì‹œë©´ í¸í•˜ê²Œ ì—°ë½ì£¼ì„¸ìš”.',
  missed: 'ì•ˆë…•í•˜ì„¸ìš”, ì „í™”ë¥¼ ë°›ì§€ ëª»í•´ ì£„ì†¡í•©ë‹ˆë‹¤. í™•ì¸ í›„ ë‹¤ì‹œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.',
  busy: 'ì•ˆë…•í•˜ì„¸ìš”, í†µí™”ì¤‘ì´ë¼ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.',
};

// ì½œë°± ì„¤ì • ì¸í„°í˜ì´ìŠ¤
export interface CallbackConfig {
  enabled: boolean;
  autoSend: boolean;
  delay: number;
  // 3ê°€ì§€ ì˜µì…˜ë³„ ì„¤ì •
  onEndEnabled: boolean;
  onEndMessage: string;
  onMissedEnabled: boolean;
  onMissedMessage: string;
  onBusyEnabled: boolean;
  onBusyMessage: string;
  // ëª…í•¨ ì´ë¯¸ì§€
  businessCardEnabled: boolean;
  businessCardImageUrl: string | null;
}
```

#### ìƒˆë¡œ ì¶”ê°€ëœ í•¨ìˆ˜
```typescript
/**
 * í†µí™” ì´ë²¤íŠ¸ ì²˜ë¦¬ (3ê°€ì§€ íƒ€ì…: ended, missed, busy)
 */
export async function handleCallEvent(
  userId: string,
  phoneNumber: string,
  eventType: CallEventType
): Promise<void>
```

---

### 5. í†µí™” ê°ì§€ ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
**íŒŒì¼**: `mobile/src/services/callDetectionService.ts`

#### ì´ë²¤íŠ¸ íƒ€ì… ê²°ì • ë¡œì§
```typescript
function determineCallEventType(lastState: string | null, answered: boolean): CallEventType | null {
  if (lastState === 'Offhook' && answered) {
    // ì „í™”ë¥¼ ë°›ê³  ëŠìŒ = í†µí™” ì¢…ë£Œ
    return 'ended';
  } else if (lastState === 'Incoming' && !answered) {
    // ì „í™”ê°€ ì™”ëŠ”ë° ì•ˆ ë°›ê³  ëŠê¹€ = ë¶€ì¬ì¤‘
    return 'missed';
  } else if (lastState === 'Offhook' && !answered) {
    // ë°œì‹  ì „í™” ëŠìŒ (ì½œë°± ì•ˆ ë³´ëƒ„)
    return null;
  }
  return 'ended';
}
```

---

### 6. ì§ì ‘ SMS ë°œì†¡ í•¨ìˆ˜ ì¶”ê°€
**íŒŒì¼**: `mobile/src/lib/smsSender.ts`

```typescript
/**
 * ì§ì ‘ SMS ë°œì†¡ (í…ŒìŠ¤íŠ¸ìš© - Task ì—†ì´ ë°”ë¡œ ë°œì†¡)
 */
export async function sendSmsDirectly(
  phoneNumber: string,
  message: string
): Promise<boolean>
```

---

### 7. ë§ˆìŠ¤í„° í”Œëœ v2.0 ì—…ë°ì´íŠ¸
**íŒŒì¼**: `BIZCONNECT_MASTER_PLAN.md`

- ìƒì„¸ ì½œë°± ë°œì†¡ íë¦„ë„ ì¶”ê°€
- 3ê°€ì§€ ì½œë°± ì˜µì…˜ ì„¤ì • UI ì„¤ê³„
- DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (user_settings ì»¬ëŸ¼)
- ê°œë°œ ë¡œë“œë§µ ì—…ë°ì´íŠ¸

---

## ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `SmsModule.java` | Android 12+/13+ í˜¸í™˜ì„± ìˆ˜ì • |
| `taskService.ts` | try-catch êµ¬ë¬¸ ì˜¤ë¥˜ ìˆ˜ì • |
| `babel.config.js` | ìƒˆë¡œ ìƒì„± |
| `callbackManager.ts` | 3ê°€ì§€ ì´ë²¤íŠ¸ íƒ€ì…, handleCallEvent í•¨ìˆ˜ ì¶”ê°€ |
| `callDetectionService.ts` | ì´ë²¤íŠ¸ íƒ€ì… ê²°ì • ë¡œì§ êµ¬í˜„ |
| `smsSender.ts` | sendSmsDirectly í•¨ìˆ˜ ì¶”ê°€ |
| `BIZCONNECT_MASTER_PLAN.md` | v2.0 ì—…ë°ì´íŠ¸ |

---

## í…ŒìŠ¤íŠ¸ ê²°ê³¼

### Android 15 (Galaxy S22) í…ŒìŠ¤íŠ¸
1. Release APK ë¹Œë“œ ì„±ê³µ
2. ADB ì„¤ì¹˜ ì„±ê³µ
3. ì•± ì‹¤í–‰ - ì •ìƒ
4. ë¡œê·¸ì¸ - ì •ìƒ
5. í™ˆ í™”ë©´ - ì •ìƒ (ë” ì´ìƒ í¬ë˜ì‹œ ì—†ìŒ)
6. í†µí™” ì¢…ë£Œ í›„ SMS ë°œì†¡ - **ì„±ê³µ!**

---

## ë‹¤ìŒ ì‘ì—… ì˜ˆì •

### Phase 1 (ê³„ì†)
- [ ] ì•±ì—ì„œ ì½œë°± ì„¤ì • í™”ë©´ êµ¬í˜„
  - 3ê°€ì§€ ì˜µì…˜ ON/OFF í† ê¸€
  - ë©”ì‹œì§€ í…œí”Œë¦¿ í¸ì§‘
  - ëª…í•¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ
- [ ] MMS ë°œì†¡ êµ¬í˜„ (ëª…í•¨ ì´ë¯¸ì§€ ì²¨ë¶€)
- [ ] user_settings DBì— ì„¤ì • ì €ì¥

### Phase 2
- [ ] ì¹´í…Œê³ ë¦¬ë³„ ë°œì†¡ ì—¬ë¶€ í…ŒìŠ¤íŠ¸
- [ ] AI ë§ì¶¤ ë¬¸ì API ì—°ë™

---

## ê¸°ìˆ  ë…¸íŠ¸

### Android API Level í˜¸í™˜ì„±
| ê¸°ëŠ¥ | API Level | Android ë²„ì „ |
|------|-----------|-------------|
| PendingIntent FLAG_IMMUTABLE | 31+ | Android 12+ |
| RECEIVER_NOT_EXPORTED | 33+ | Android 13+ |

### ë¹Œë“œ ëª…ë ¹ì–´
```powershell
# Release APK ë¹Œë“œ
powershell.exe -Command "Set-Location 'C:\call\mobile\android'; [Environment]::SetEnvironmentVariable('JAVA_HOME', 'C:\Java\jdk-17.0.13+11', 'Process'); & .\gradlew.bat assembleRelease --no-daemon '-PreactNativeArchitectures=arm64-v8a'"

# APK ì„¤ì¹˜
& 'C:\AndroidSdk\platform-tools\adb.exe' install -r 'C:\call\mobile\android\app\build\outputs\apk\release\app-release.apk'
```

---

---

## ì¶”ê°€ ì‘ì—… (ì˜¤í›„)

### 8. 3ê°€ì§€ ì˜µì…˜ë³„ ê°œë³„ ì´ë¯¸ì§€ ì„¤ì •
**íŒŒì¼**: `mobile/src/lib/callbackManager.ts`

ê° ì½œë°± ì˜µì…˜(í†µí™”ì¢…ë£Œ/ë¶€ì¬ì¤‘/í†µí™”ì¤‘)ì— ê°œë³„ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„

#### ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ ë¡œì§
```
1. ì˜µì…˜ë³„ ê°œë³„ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ â†’ ê·¸ê²ƒ ì‚¬ìš© (callback_on_xxx_image_url)
2. ê°œë³„ ì´ë¯¸ì§€ ì—†ê³  business_card_enabled=trueë©´ â†’ ê¸°ë³¸ ëª…í•¨ ì‚¬ìš©
3. ë‘˜ ë‹¤ ì—†ìœ¼ë©´ â†’ ì´ë¯¸ì§€ ì—†ì´ SMSë¡œ ë°œì†¡
```

---

### 9. MMS ì´ë¯¸ì§€ ë°œì†¡ ê¸°ëŠ¥ êµ¬í˜„
**íŒŒì¼ë“¤**:
- `node_modules/react-native-get-sms-android/android/src/main/java/com/react/SmsModule.java`
- `mobile/android/app/src/main/AndroidManifest.xml`
- `mobile/android/app/src/main/res/xml/file_paths.xml`
- `mobile/src/lib/smsSender.ts`

#### SmsModule.javaì— ì¶”ê°€ëœ ë©”ì„œë“œ
```java
@ReactMethod
public void sendMms(String phoneNumber, String message, String imageUrl,
                    final Callback errorCallback, final Callback successCallback)
```

- ì´ë¯¸ì§€ URLì—ì„œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
- ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥
- FileProviderë¥¼ í†µí•´ Uri ìƒì„±
- Intentë¡œ ë©”ì‹œì§€ ì•± ì‹¤í–‰

#### AndroidManifest.xml ë³€ê²½
```xml
<!-- FileProvider for MMS image sharing -->
<provider
  android:name="androidx.core.content.FileProvider"
  android:authorities="${applicationId}.fileprovider"
  android:exported="false"
  android:grantUriPermissions="true">
  <meta-data
    android:name="android.support.FILE_PROVIDER_PATHS"
    android:resource="@xml/file_paths" />
</provider>
```

---

### 10. DB ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸
**íŒŒì¼**: `supabase/update-callback-settings.sql`

```sql
-- 3ê°€ì§€ ì˜µì…˜ë³„ ì´ë¯¸ì§€ ì»¬ëŸ¼ ì¶”ê°€
callback_on_end_image_url TEXT DEFAULT NULL
callback_on_missed_image_url TEXT DEFAULT NULL
callback_on_busy_image_url TEXT DEFAULT NULL
```

---

## ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡ (ì¶”ê°€)

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `SmsModule.java` | sendMms, autoSendMms ë©”ì„œë“œ ì¶”ê°€ |
| `AndroidManifest.xml` | FileProvider ì¶”ê°€ |
| `file_paths.xml` | ìƒˆë¡œ ìƒì„± - íŒŒì¼ ê²½ë¡œ ì„¤ì • |
| `smsSender.ts` | sendMmsDirectly í•¨ìˆ˜ ì¶”ê°€ |
| `callbackManager.ts` | ì˜µì…˜ë³„ ê°œë³„ ì´ë¯¸ì§€ ì§€ì›, MMS ë°œì†¡ í˜¸ì¶œ |
| `update-callback-settings.sql` | DB ìŠ¤í‚¤ë§ˆ SQL ìƒì„± |
| `BIZCONNECT_MASTER_PLAN.md` | ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ ë¡œì§ ì¶”ê°€ |

---

## ë‚¨ì€ ì‘ì—… (ë‹¤ìŒ ì„¸ì…˜)

- [ ] Supabaseì—ì„œ SQL ì‹¤í–‰í•˜ì—¬ DB ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸
- [x] ì•±ì—ì„œ ì½œë°± ì„¤ì • í™”ë©´ UI êµ¬í˜„
- [ ] ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„
- [ ] MMS ë°œì†¡ ì‹¤ì œ í…ŒìŠ¤íŠ¸ (ì´ë¯¸ì§€ URL ì„¤ì • í›„)

---

## ì¶”ê°€ ì‘ì—… (ê³„ì†)

### 11. ì•± ì½œë°± ì„¤ì • í™”ë©´ UX ê°œì„ 
**íŒŒì¼**: `mobile/src/screens/CallbackSettingsScreen.tsx`

#### ê°œì„  ë‚´ìš©
- **KeyboardAvoidingView** ì¶”ê°€ë¡œ í‚¤ë³´ë“œ ê°€ë¦¼ ë¬¸ì œ í•´ê²°
- 3ê°€ì§€ ì½œë°± ì˜µì…˜ (í†µí™”ì¢…ë£Œ/ë¶€ì¬ì¤‘/í†µí™”ì¤‘) UI êµ¬í˜„
- ê° ì˜µì…˜ë³„ ON/OFF í† ê¸€ + ë©”ì‹œì§€ ì…ë ¥ í•„ë“œ
- ìƒ‰ìƒ êµ¬ë¶„: í†µí™”ì¢…ë£Œ(ì´ˆë¡), ë¶€ì¬ì¤‘(ë…¸ë‘), í†µí™”ì¤‘(ë¹¨ê°•)
- í•˜ë‹¨ ì—¬ë°± ì¶”ê°€ë¡œ í‚¤ë³´ë“œ ì˜¬ë¼ì˜¬ ë•Œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥

#### UI êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì½œë°± ì„œë¹„ìŠ¤ í™œì„±í™” [ON] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í†µí™”ì¢…ë£Œ [ON]           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë©”ì‹œì§€ ì…ë ¥ í•„ë“œ    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë¶€ì¬ì¤‘ [ON]             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë©”ì‹œì§€ ì…ë ¥ í•„ë“œ    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í†µí™”ì¤‘ [ON]             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ë©”ì‹œì§€ ì…ë ¥ í•„ë“œ    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ëª…í•¨ ì´ë¯¸ì§€ ì²¨ë¶€ [OFF]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì €ì¥] [ì·¨ì†Œ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 12. ì›¹ ì½œë°± ì„¤ì • UI ì—…ë°ì´íŠ¸
**íŒŒì¼**: `web/src/app/dashboard/settings/page.tsx`

#### ì¶”ê°€ ê¸°ëŠ¥
- 3ê°€ì§€ ì½œë°± ì˜µì…˜ ìƒíƒœ ê´€ë¦¬ (`callbackOptions` state)
- ìƒí™©ë³„ ì½œë°± ë©”ì‹œì§€ ì„¤ì • UI
- í† ê¸€ ìŠ¤ìœ„ì¹˜ë¡œ ê° ì˜µì…˜ ON/OFF
- ìƒ‰ìƒ êµ¬ë¶„ ë°°ì§€: í†µí™”ì¢…ë£Œ(ì´ˆë¡), ë¶€ì¬ì¤‘(ë…¸ë‘), í†µí™”ì¤‘(ë¹¨ê°•)
- ê¸°ì¡´ ì‹ ê·œ/ê¸°ì¡´ ê³ ê° í…œí”Œë¦¿ì€ "ê³ ê¸‰" ì„¹ì…˜ìœ¼ë¡œ ì´ë™

#### ìƒˆë¡œìš´ ìƒíƒœ
```typescript
const [callbackOptions, setCallbackOptions] = useState({
  callback_on_end_enabled: true,
  callback_on_end_message: '...',
  callback_on_missed_enabled: true,
  callback_on_missed_message: '...',
  callback_on_busy_enabled: true,
  callback_on_busy_message: '...',
})
```

---

## ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡ (ì¶”ê°€)

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `CallbackSettingsScreen.tsx` | 3ê°€ì§€ ì˜µì…˜ UI, KeyboardAvoidingView ì¶”ê°€ |
| `settings/page.tsx` (ì›¹) | 3ê°€ì§€ ì½œë°± ì˜µì…˜ ì„¤ì • UI ì¶”ê°€ |

---

## ì¶”ê°€ ì‘ì—… (ì €ë…)

### 13. ì›¹ ì„¤ì • ì €ì¥ ì˜¤ë¥˜ ìˆ˜ì •
**íŒŒì¼**: `web/src/app/dashboard/settings/page.tsx`

#### ë¬¸ì œ
- `anniversary_notifications_enabled` ì»¬ëŸ¼ì´ DBì— ì—†ì–´ì„œ ì €ì¥ ì‹¤íŒ¨

#### í•´ê²°
- `handleSave` í•¨ìˆ˜ì—ì„œ DBì— ì¡´ì¬í•˜ëŠ” ì»¬ëŸ¼ë§Œ ëª…ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ë„ë¡ ìˆ˜ì •
- `onConflict: 'user_id'` ì˜µì…˜ ì¶”ê°€

```typescript
const saveData = {
  user_id: user.id,
  // ê¸°ë³¸ ì„¤ì •
  industry_type, limit_mode, throttle_interval, auto_callback_enabled,
  // ì½œë°± ì˜µì…˜
  callback_on_end_enabled, callback_on_end_message,
  callback_on_missed_enabled, callback_on_missed_message,
  callback_on_busy_enabled, callback_on_busy_message,
  // ëª…í•¨, ì•Œë¦¼
  business_card_enabled, business_card_image_url,
  push_notifications_enabled, birthday_notifications_enabled,
  anniversary_notifications_enabled, task_notifications_enabled,
  notification_time, birthday_reminder_days, anniversary_reminder_days,
}
```

---

### 14. ì•± ëª…í•¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„
**íŒŒì¼**: `mobile/src/screens/CallbackSettingsScreen.tsx`

#### ì¶”ê°€ëœ ê¸°ëŠ¥
- `react-native-image-picker` ì‚¬ìš©í•˜ì—¬ ê°¤ëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ ì„ íƒ
- Supabase Storageì— ì´ë¯¸ì§€ ì—…ë¡œë“œ
- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
- ì´ë¯¸ì§€ ë³€ê²½/ì‚­ì œ ë²„íŠ¼

#### í•µì‹¬ ì½”ë“œ
```typescript
const pickAndUploadImage = async () => {
  const result = await launchImageLibrary({
    mediaType: 'photo',
    quality: 0.8,
    maxWidth: 1024,
    maxHeight: 1024,
  });

  // Supabase Storageì— ì—…ë¡œë“œ
  const { data, error } = await supabase.storage
    .from('images')
    .upload(filePath, blob, { contentType: 'image/jpeg', upsert: true });

  // Public URL ê°€ì ¸ì˜¤ê¸°
  const { data: urlData } = supabase.storage
    .from('images')
    .getPublicUrl(filePath);
};
```

---

### 15. DB ìŠ¤í‚¤ë§ˆ SQL ì—…ë°ì´íŠ¸
**íŒŒì¼**: `supabase/update-callback-settings.sql`

#### ì¶”ê°€ëœ ì»¬ëŸ¼
```sql
-- ì•Œë¦¼ ì„¤ì • ì»¬ëŸ¼
push_notifications_enabled BOOLEAN DEFAULT true
birthday_notifications_enabled BOOLEAN DEFAULT true
anniversary_notifications_enabled BOOLEAN DEFAULT true
task_notifications_enabled BOOLEAN DEFAULT true
notification_time TIME DEFAULT '09:00:00'
birthday_reminder_days INTEGER DEFAULT 1
anniversary_reminder_days INTEGER DEFAULT 1
```

---

## ìµœì¢… ìˆ˜ì • íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `CallbackSettingsScreen.tsx` | ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€ |
| `settings/page.tsx` (ì›¹) | handleSave ì˜¤ë¥˜ ìˆ˜ì • |
| `update-callback-settings.sql` | ì•Œë¦¼ ì„¤ì • ì»¬ëŸ¼ ì¶”ê°€ |

---

## GitHub ì»¤ë°‹ ê¸°ë¡

| ì»¤ë°‹ | ì„¤ëª… |
|------|------|
| `d14d874` | Add 3 callback options UI for app and web settings |
| `3583309` | Fix settings save error and add image upload to app |

---

## ì˜¤ëŠ˜ì˜ ì„±ê³¼ ìš”ì•½

1. **ì½œë°± SMS ë°œì†¡ ê¸°ëŠ¥ ì™„ì„±**
   - Android 15 í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°
   - 3ê°€ì§€ ì½œë°± ì´ë²¤íŠ¸ (í†µí™”ì¢…ë£Œ/ë¶€ì¬ì¤‘/í†µí™”ì¤‘) êµ¬í˜„

2. **MMS ì´ë¯¸ì§€ ë°œì†¡ ì¤€ë¹„**
   - FileProvider ì„¤ì • ì™„ë£Œ
   - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ë° ì²¨ë¶€ ë¡œì§ êµ¬í˜„

3. **ì„¤ì • í™”ë©´ UI/UX ê°œì„ **
   - ì•±: KeyboardAvoidingViewë¡œ í‚¤ë³´ë“œ ê°€ë¦¼ í•´ê²°
   - ì•±: ëª…í•¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€
   - ì›¹: 3ê°€ì§€ ì½œë°± ì˜µì…˜ ì„¤ì • UI ì¶”ê°€

4. **DB ìŠ¤í‚¤ë§ˆ ì •ë¦¬**
   - ì½œë°± ì˜µì…˜ ì»¬ëŸ¼ ì¶”ê°€
   - ì•Œë¦¼ ì„¤ì • ì»¬ëŸ¼ ì¶”ê°€

---

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 9ì¼
**ì‘ì„±ì**: Claude Code
**ë²„ì „**: 1.5.0

---

## ì¶”ê°€ ì‘ì—… (ì €ë… - ì•± UI/UX ê°œì„ )

### 16. ì•± í™ˆ í™”ë©´ ë° ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ ê°œì„ 
**ë‚ ì§œ**: 2025ë…„ 12ì›” 9ì¼ (ì €ë…)

#### ì‘ì—… ë‚´ìš©
1. **í™ˆ í™”ë©´ ê°œì„ **
   - ë¬¸ì ë³´ë‚´ê¸° ë²„íŠ¼ ê°•ì¡° (í° ë²„íŠ¼, ìƒë‹¨ ë°°ì¹˜)
   - ì¼ì¼ í•œë„ ë°°ë„ˆ ì¶”ê°€ (ì§„í–‰ë°”, ì„±ê³µ ê±´ìˆ˜ í‘œì‹œ)
   - ì½œë°± ì„¤ì • ì¹´ë“œ ì¶”ê°€ (Android ë°°ì§€ í¬í•¨)
   - ìì£¼ ì“°ëŠ” í…œí”Œë¦¿ ë‹¨ì¶• ë²„íŠ¼ (ìµœëŒ€ 3ê°œ)
   - ì„¤ì • ë²„íŠ¼ ì¶”ê°€ (í—¤ë” ìš°ì¸¡)

2. **ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ ìƒì„±**
   - ìƒë‹¨ ê²€ìƒ‰ ë°” (ê³ ê° ì´ë¦„/ì „í™”ë²ˆí˜¸ ê²€ìƒ‰)
   - ë©”ì‹œì§€ ì‘ì„± ì˜ì—­ (í° ì…ë ¥ì°½)
   - AI ìš”ì•½ ì˜ì—­ (ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥)
   - ìˆ˜ì‹ ì ë‹¤ì¤‘ ì„ íƒ (ì²´í¬ë°•ìŠ¤, ì „ì²´ ì„ íƒ)
   - í…œí”Œë¦¿ ì„ íƒ (ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥)
   - í•˜ë‹¨ ê³ ì • ë²„íŠ¼ (AI ë²„íŠ¼ + ì „ì†¡ ë²„íŠ¼)

3. **ì„¤ì • í™”ë©´ êµ¬ì¡° ì¬ë°°ì¹˜**
   - ì½œë°± ì„¤ì • ìš°ì„  ë°°ì¹˜
   - ì£¼ì†Œë¡ ì—…ë¡œë“œ ì„¹ì…˜
   - ê¸°íƒ€ ì„¤ì • ì„¹ì…˜
   - ê³„ì • ì •ë³´ í‘œì‹œ

4. **AI ê¸°ëŠ¥ í†µí•©**
   - AI ë¬¸ì ìƒì„± (ìš”ì•½ ì •ë³´ + ê³ ê° ì •ë³´ ê¸°ë°˜)
   - ë¬¸ì ìš”ì•½ AI (ê³¼ê±° ëŒ€í™” ì´ë ¥ ë¶„ì„)

5. **ì›¹-ì•± ë™ê¸°í™” ê°œì„ **
   - í´ë§ ê°„ê²© 10ì´ˆ â†’ 5ì´ˆë¡œ ë‹¨ì¶•
   - ì‹¤ì‹œê°„ êµ¬ë… ìœ ì§€

#### ìˆ˜ì •ëœ íŒŒì¼
- `mobile/src/screens/HomeScreen.tsx` - í™ˆ í™”ë©´ ê°œì„ 
- `mobile/src/screens/SendSMSScreen.tsx` - ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ ì‹ ê·œ ìƒì„±
- `mobile/src/screens/SettingsScreen.tsx` - ì„¤ì • í™”ë©´ ì‹ ê·œ ìƒì„±
- `mobile/App.tsx` - ìƒˆ í™”ë©´ ë¼ìš°íŒ… ì¶”ê°€

---

## ë²„ê·¸ ìˆ˜ì • ì‹œë„ (ì €ë… - ì—¬ëŸ¬ ë²ˆ ì‹œë„)

### 17. ìë™ ë°œì†¡ í­ì£¼ ë¬¸ì œ ìˆ˜ì • ì‹œë„
**ë‚ ì§œ**: 2025ë…„ 12ì›” 9ì¼ (ì €ë…)

#### ë°œê²¬ëœ ë¬¸ì œ
1. **ì•± ì‹¤í–‰ ì‹œ ìë™ ë¬¸ì ë°œì†¡**
   - ì•±ì„ ì—´ ë•Œë§ˆë‹¤ ë¬¸ìê°€ ìë™ìœ¼ë¡œ ë°œì†¡ë¨
   - ì›ì¸: ì˜¤ë˜ëœ pending ì‘ì—…ë“¤ì´ ìë™ìœ¼ë¡œ íì— ì¶”ê°€ë˜ì–´ ì²˜ë¦¬ë¨

2. **ì›¹ì—ì„œ ë¬¸ì ë³´ë‚´ê¸° ì‹œ ì˜ëª»ëœ ë‚´ìš© ì „ì†¡**
   - ì›¹ì—ì„œ ì‘ì„±í•œ ë¬¸ìê°€ ì•„ë‹Œ ì´ì „ì— ì˜ëª» ë°œì†¡ëœ ë¬¸ì ë‚´ìš©ì´ ì „ì†¡ë¨
   - ì›ì¸: ì˜¤ë˜ëœ pending ì‘ì—…ì´ íì— ë‚¨ì•„ìˆì–´ì„œ ì²˜ë¦¬ë¨

#### ìˆ˜ì • ì‹œë„
1. **ì˜¤ë˜ëœ ì‘ì—… í•„í„°ë§**
   - 24ì‹œê°„ ì´ìƒ ëœ pending ì‘ì—… ë¬´ì‹œ
   - ìµœê·¼ 5ë¶„ ì´ë‚´ ìƒì„±ëœ ì‘ì—…ë§Œ ì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½

2. **ìë™ ì²˜ë¦¬ ì°¨ë‹¨**
   - `taskService.loadPendingTasks()`ì—ì„œ ìë™ í ì‹œì‘ ì œê±°
   - ì‹¤ì‹œê°„ êµ¬ë…ì€ ìœ ì§€í•˜ë˜ ìë™ ì²˜ë¦¬ ë¹„í™œì„±í™”

3. **ë¡œê·¸ ê¸°ë¡ ì¶”ê°€**
   - ì•±ì—ì„œ ì§ì ‘ ë°œì†¡í•œ ë¬¸ìë„ `sms_logs`ì— ê¸°ë¡í•˜ë„ë¡ ìˆ˜ì •
   - ì›¹ íˆìŠ¤í† ë¦¬ ì—°ë™ì„ ìœ„í•œ ë¡œê·¸ ì €ì¥

#### ìˆ˜ì •ëœ íŒŒì¼
- `mobile/src/services/taskService.ts` - ìë™ ì²˜ë¦¬ ë¡œì§ ìˆ˜ì •
- `mobile/src/screens/SendSMSScreen.tsx` - ë¡œê·¸ ê¸°ë¡ ì¶”ê°€

---

### 18. UI/UX ë²„ê·¸ ìˆ˜ì • ì‹œë„
**ë‚ ì§œ**: 2025ë…„ 12ì›” 9ì¼ (ì €ë…)

#### ë°œê²¬ëœ ë¬¸ì œ
1. **í•˜ë‹¨ ë²„íŠ¼ì´ ì•ˆë“œë¡œì´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ì™€ ê²¹ì¹¨**
   - ì „ì†¡ ë²„íŠ¼ì´ í•˜ë‹¨ì— ìˆì–´ì„œ ëˆŒëŸ¬ì§€ì§€ ì•ŠìŒ
   - ëª¨ë“  í™”ë©´ í•˜ë‹¨ì´ ì˜ë¦¼

2. **ë¬¸ì ì…ë ¥ ì‹œ í…ìŠ¤íŠ¸ê°€ ì•ˆ ë³´ì„**
   - ì…ë ¥ í•„ë“œì— ê¸€ì„ ì¨ë„ ë³´ì´ì§€ ì•ŠìŒ
   - placeholderë„ ì•ˆ ë³´ì„

3. **ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ ì—†ìŒ**
   - ì„¤ì • í™”ë©´ ë“±ì—ì„œ ë’¤ë¡œ ê°ˆ ë°©ë²•ì´ ì—†ìŒ

#### ìˆ˜ì • ì‹œë„
1. **SafeArea ì ìš©**
   - ëª¨ë“  í™”ë©´ì— SafeAreaView ì ìš©
   - í•˜ë‹¨ ì—¬ë°± í™•ëŒ€ (paddingBottom: 100)

2. **ì…ë ¥ í•„ë“œ ìƒ‰ìƒ ëª…ì‹œ**
   - placeholderTextColor ì¶”ê°€
   - í…ìŠ¤íŠ¸ ìƒ‰ìƒ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •

3. **ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ ì¶”ê°€**
   - ëª¨ë“  í™”ë©´ í—¤ë”ì— ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ ì¶”ê°€

#### ìˆ˜ì •ëœ íŒŒì¼
- `mobile/src/screens/SendSMSScreen.tsx` - SafeArea, ì…ë ¥ í•„ë“œ ìƒ‰ìƒ, ë’¤ë¡œ ê°€ê¸°
- `mobile/src/screens/HomeScreen.tsx` - SafeArea ì ìš©
- `mobile/src/screens/SettingsScreen.tsx` - SafeArea, ë’¤ë¡œ ê°€ê¸°

---

### 19. ëª…í•¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬ë˜ì‹œ ìˆ˜ì • ì‹œë„
**ë‚ ì§œ**: 2025ë…„ 12ì›” 9ì¼ (ì €ë…)

#### ë°œê²¬ëœ ë¬¸ì œ
1. **ëª…í•¨ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ ì•± í¬ë˜ì‹œ**
   - ì´ë¯¸ì§€ ì„ íƒ ì‹œ ì•±ì´ ë°”ë¡œ ì¢…ë£Œë¨
   - ì›ì¸: ì´ë¯¸ì§€ ê¶Œí•œ ìš”ì²­ ëˆ„ë½ ë˜ëŠ” ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±

2. **ì›¹ì—ì„œ ì„¤ì •í•œ ëª…í•¨ ì´ë¯¸ì§€ê°€ ì•±ì— ì•ˆ ë³´ì„**
   - ì›¹ì—ì„œ ì—…ë¡œë“œí•œ ëª…í•¨ì´ ì•± ì„¤ì • í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŒ
   - ì›ì¸: ë¡œë“œ ì‹œì  ë¬¸ì œ ë˜ëŠ” ë™ê¸°í™” ë¬¸ì œ

#### ìˆ˜ì • ì‹œë„
1. **ì´ë¯¸ì§€ ê¶Œí•œ ìš”ì²­ ì¶”ê°€**
   - `react-native-image-picker` ì‚¬ìš© ì „ ê¶Œí•œ í™•ì¸
   - ê¶Œí•œ ê±°ë¶€ ì‹œ ì•Œë¦¼ í‘œì‹œ

2. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
   - try-catchë¡œ ëª¨ë“  ì—ëŸ¬ ì²˜ë¦¬
   - ì—ëŸ¬ ë°œìƒ ì‹œ ì•± í¬ë˜ì‹œ ëŒ€ì‹  ì•Œë¦¼ í‘œì‹œ

#### ìˆ˜ì •ëœ íŒŒì¼
- `mobile/src/screens/CallbackSettingsScreen.tsx` - ì´ë¯¸ì§€ ê¶Œí•œ ìš”ì²­, ì—ëŸ¬ ì²˜ë¦¬

---

## í˜„ì¬ ë‚¨ì•„ìˆëŠ” ë¬¸ì œì  (2025ë…„ 12ì›” 9ì¼ ì €ë… ê¸°ì¤€)

### ğŸ”´ ê¸´ê¸‰ ë¬¸ì œ
1. **ì›¹ì—ì„œ ë¬¸ì ë³´ë‚´ê¸°ê°€ ëŒ€ê¸° ì•ˆë¨**
   - ì›¹ì—ì„œ ë¬¸ì ë³´ë‚´ê¸°ë¥¼ í•´ë„ ì•±ìœ¼ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
   - ì›ì¸: ìë™ ì²˜ë¦¬ ì°¨ë‹¨ ìƒíƒœ (ì‹¤ì‹œê°„ êµ¬ë…ì€ ìœ ì§€í•˜ì§€ë§Œ ìë™ í ì‹œì‘ ì•ˆí•¨)
   - í•´ê²° í•„ìš”: ìë™ ì²˜ë¦¬ ì¬í™œì„±í™” ë˜ëŠ” ìˆ˜ë™ ì²˜ë¦¬ ë°©ë²• ì œê³µ

2. **ì•±ì—ì„œ ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì•ˆë¨**
   - ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ì— ì´ë¯¸ì§€ ì²¨ë¶€ ë²„íŠ¼ì´ ì—†ìŒ
   - ëª…í•¨ ì´ë¯¸ì§€ ì¶”ê°€ ì‹œ ì•± í¬ë˜ì‹œ ë°œìƒ
   - í•´ê²° í•„ìš”: ì´ë¯¸ì§€ ì²¨ë¶€ UI ì¶”ê°€, í¬ë˜ì‹œ ì›ì¸ íŒŒì•… ë° ìˆ˜ì •

3. **ë¬¸ì ë³´ë‚¸ ì¹´ìš´íŒ… ì•ˆë¨**
   - ì•±ì—ì„œ ë¬¸ìë¥¼ ë³´ë‚´ë„ ì¼ì¼ í•œë„ ì¹´ìš´íŠ¸ê°€ ì¦ê°€í•˜ì§€ ì•ŠìŒ
   - ì›¹ íˆìŠ¤í† ë¦¬ì—ë„ ë°˜ì˜ ì•ˆë¨
   - í•´ê²° í•„ìš”: `sms_logs` ì €ì¥ í™•ì¸, í†µê³„ ì—…ë°ì´íŠ¸ ë¡œì§ í™•ì¸

4. **ì•±ì—ì„œ AI ì‘ë™ ì•ˆë¨**
   - AI ë²„íŠ¼ í´ë¦­ ì‹œ ì‘ë™í•˜ì§€ ì•ŠìŒ
   - AI ìš”ì•½ ê¸°ëŠ¥ë„ ì‘ë™í•˜ì§€ ì•ŠìŒ
   - í•´ê²° í•„ìš”: API í˜¸ì¶œ í™•ì¸, ì—ëŸ¬ ë¡œê·¸ í™•ì¸

### ğŸŸ¡ ê°œì„  í•„ìš”
1. **ì›¹ì—ì„œ ë‹¤ëŸ‰ ë°œì†¡ ì‹œ ëŠë¦¼**
   - ë‹¨ê±´ì€ ë¹ ë¥´ì§€ë§Œ ë‹¤ëŸ‰ ë°œì†¡ ì‹œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼
   - í•´ê²°: ë‹¤ëŸ‰ ë°œì†¡ ì‹œ ì§€ì—° ì‹œê°„ ì¶”ê°€ (300ms)

2. **ëª…í•¨ ì´ë¯¸ì§€ ë™ê¸°í™”**
   - ì›¹ì—ì„œ ì„¤ì •í•œ ëª…í•¨ì´ ì•±ì— ì•ˆ ë³´ì„
   - í•´ê²°: ë¡œë“œ ì‹œì  í™•ì¸, ë™ê¸°í™” ë¡œì§ ê°œì„ 

---

## ë‹¤ìŒ ì‘ì—… ì˜ˆì •

### ìš°ì„ ìˆœìœ„ 1 (ê¸´ê¸‰)
- [ ] ì›¹-ì•± ìë™ ì²˜ë¦¬ ì¬í™œì„±í™” (ì•ˆì „í•˜ê²Œ)
- [ ] ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ êµ¬í˜„ (ë¬¸ì ë³´ë‚´ê¸° í™”ë©´)
- [ ] ëª…í•¨ ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬ë˜ì‹œ ìˆ˜ì •
- [ ] ë¬¸ì ì¹´ìš´íŒ… ë¡œì§ ìˆ˜ì •
- [ ] AI ê¸°ëŠ¥ ì‘ë™ í™•ì¸ ë° ìˆ˜ì •

### ìš°ì„ ìˆœìœ„ 2 (ì¤‘ìš”)
- [ ] ì›¹-ì•± ëª…í•¨ ì´ë¯¸ì§€ ë™ê¸°í™”
- [ ] ë‹¤ëŸ‰ ë°œì†¡ ìµœì í™”
- [ ] ì•± í¬ë˜ì‹œ ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„

---

---

## ì´ë¯¸ì§€ ê´€ë ¨ ë¬¸ì œ ì›ì¸ ë¶„ì„ (2025ë…„ 12ì›” 9ì¼ ì €ë…)

### ğŸ” ì™„ë²½í•œ ì›ì¸ íŒŒì•…

#### ë¬¸ì œ 1: ì´ë¯¸ì§€ íŒŒì¼ì´ ë¬¸ìì— ì•ˆ ê°€ëŠ” ì´ìœ 

**ì›ì¸**:
1. **`SendSMSScreen.tsx`ì˜ `handleSend` í•¨ìˆ˜ì—ì„œ ì´ë¯¸ì§€ ì²˜ë¦¬ ë¡œì§ì´ ì „í˜€ ì—†ìŒ**
   - í˜„ì¬ ì½”ë“œ: `await sendSmsDirectly(customer.phone, message);` ë§Œ í˜¸ì¶œ
   - `sendMmsDirectly` í•¨ìˆ˜ëŠ” ì¡´ì¬í•˜ì§€ë§Œ í˜¸ì¶œí•˜ëŠ” ê³³ì´ ì—†ìŒ
   - ì´ë¯¸ì§€ ìƒíƒœ ë³€ìˆ˜ë„ ì—†ê³ , ì´ë¯¸ì§€ ì„ íƒ UIë„ ì—†ìŒ

2. **ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ì´ ì „í˜€ êµ¬í˜„ë˜ì§€ ì•ŠìŒ**
   - `SendSMSScreen.tsx`ì— ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ì´ ì—†ìŒ
   - ì´ë¯¸ì§€ ìƒíƒœ ê´€ë¦¬ê°€ ì—†ìŒ (`useState`ë¡œ ì´ë¯¸ì§€ URL ì €ì¥í•˜ëŠ” ë³€ìˆ˜ ì—†ìŒ)
   - `handleSend`ì—ì„œ ì´ë¯¸ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë¡œì§ì´ ì—†ìŒ

**ì½”ë“œ ìœ„ì¹˜**: `mobile/src/screens/SendSMSScreen.tsx` ë¼ì¸ 272-334
```typescript
// í˜„ì¬ ì½”ë“œ (ì´ë¯¸ì§€ ì²˜ë¦¬ ì—†ìŒ)
const handleSend = async () => {
  // ... ê²€ì¦ ë¡œì§ ...
  for (const customer of selectedCustomersData) {
    try {
      await sendSmsDirectly(customer.phone, message); // SMSë§Œ ë°œì†¡
      // ì´ë¯¸ì§€ ì²¨ë¶€ ë¡œì§ì´ ì „í˜€ ì—†ìŒ!
    }
  }
}
```

**í•´ê²° ë°©ë²•**:
- ì´ë¯¸ì§€ ì„ íƒ UI ì¶”ê°€ (ë²„íŠ¼ + ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°)
- ì´ë¯¸ì§€ ìƒíƒœ ë³€ìˆ˜ ì¶”ê°€ (`const [selectedImage, setSelectedImage] = useState<string | null>(null)`)
- `handleSend`ì—ì„œ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ `sendMmsDirectly`, ì—†ìœ¼ë©´ `sendSmsDirectly` í˜¸ì¶œ

---

#### ë¬¸ì œ 2: ì•±ì—ì„œ ë¬¸ì ë³´ë‚´ê¸°ì— ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ì´ ì—†ìŒ

**ì›ì¸**:
1. **UIì— ì´ë¯¸ì§€ ì²¨ë¶€ ë²„íŠ¼ì´ ì „í˜€ ì—†ìŒ**
   - `SendSMSScreen.tsx`ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ì´ ì—†ìŒ
   - í…œí”Œë¦¿, AI ìš”ì•½, ìˆ˜ì‹ ì ì„ íƒì€ ìˆì§€ë§Œ ì´ë¯¸ì§€ ì²¨ë¶€ëŠ” ì—†ìŒ

2. **ì´ë¯¸ì§€ ì„ íƒ ê¸°ëŠ¥ì´ ì½œë°± ì„¤ì •ì—ë§Œ ìˆìŒ**
   - `CallbackSettingsScreen.tsx`ì—ë§Œ `launchImageLibrary` ì‚¬ìš©
   - ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ì—ëŠ” ì´ë¯¸ì§€ ì„ íƒ ê¸°ëŠ¥ì´ ì „í˜€ ì—†ìŒ

**ì½”ë“œ ìœ„ì¹˜**: `mobile/src/screens/SendSMSScreen.tsx`
- ì´ë¯¸ì§€ ê´€ë ¨ import ì—†ìŒ
- ì´ë¯¸ì§€ ê´€ë ¨ state ì—†ìŒ
- ì´ë¯¸ì§€ ê´€ë ¨ UI ì—†ìŒ

**í•´ê²° ë°©ë²•**:
- ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ ì¶”ê°€ (ë©”ì‹œì§€ ì…ë ¥ ì˜ì—­ ê·¼ì²˜)
- `react-native-image-picker` import ë° ì‚¬ìš©
- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° UI ì¶”ê°€
- ì´ë¯¸ì§€ ì œê±° ë²„íŠ¼ ì¶”ê°€

---

#### ë¬¸ì œ 3: ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ì°¾ëŠ” ë¬¸ì œ (ëª…í•¨ ì´ë¯¸ì§€)

**ì›ì¸**:
1. **ì›¹ì—ì„œ ì—…ë¡œë“œí•œ ëª…í•¨ ì´ë¯¸ì§€ê°€ ì•±ì— í‘œì‹œë˜ì§€ ì•ŠìŒ**
   - `CallbackSettingsScreen.tsx`ì˜ `loadSettings` í•¨ìˆ˜ì—ì„œ `business_card_image_url`ì„ ë¡œë“œí•¨
   - í•˜ì§€ë§Œ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤ë©´:
     - DBì—ì„œ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•Šì•˜ê±°ë‚˜
     - ì´ë¯¸ì§€ URLì´ ì˜ëª»ë˜ì—ˆê±°ë‚˜
     - ì´ë¯¸ì§€ ë¡œë“œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ìˆ˜ ìˆìŒ

2. **ì´ë¯¸ì§€ ì„ íƒ ì‹œ ê°¤ëŸ¬ë¦¬ ëŒ€ì‹  ë‹¤ë¥¸ ê³³ì„ ì°¾ëŠ” ë¬¸ì œ**
   - `launchImageLibrary`ëŠ” ê°¤ëŸ¬ë¦¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ ë§ìŒ
   - í•˜ì§€ë§Œ ì‚¬ìš©ìê°€ ë§í•˜ëŠ” "ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ì°¾ëŠ”ë‹¤"ëŠ” ê²ƒì€:
     - ì•„ë§ˆë„ ì›¹ì—ì„œ ì—…ë¡œë“œí•œ ëª…í•¨ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ë§í•˜ëŠ” ê²ƒ ê°™ìŒ
     - ë˜ëŠ” ì´ë¯¸ì§€ ì„ íƒ ì‹œ ê°¤ëŸ¬ë¦¬ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê²½ë¡œë¥¼ ì°¾ëŠ” ë¬¸ì œì¼ ìˆ˜ ìˆìŒ

**ì½”ë“œ ìœ„ì¹˜**: `mobile/src/screens/CallbackSettingsScreen.tsx` ë¼ì¸ 97-145
```typescript
const loadSettings = async () => {
  // ... 
  const { data: userSettings, error } = await supabase
    .from('user_settings')
    .select(`... business_card_image_url ...`)
    .eq('user_id', user.id)
    .single();
  
  if (userSettings) {
    setSettings({
      // ...
      business_card_image_url: userSettings.business_card_image_url || null,
    });
  }
}
```

**í™•ì¸ í•„ìš” ì‚¬í•­**:
- DBì— `business_card_image_url`ì´ ì œëŒ€ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€
- ì´ë¯¸ì§€ URLì´ ìœ íš¨í•œì§€ (Supabase Storage public URL)
- ì´ë¯¸ì§€ ë¡œë“œ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ”ì§€

---

#### ë¬¸ì œ 4: ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œ ì•± í¬ë˜ì‹œ

**ì›ì¸**:
1. **ê¶Œí•œ ìš”ì²­ ë¬¸ì œ**
   - `requestImagePermission` í•¨ìˆ˜ì—ì„œ ê¶Œí•œ ìš”ì²­ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ
   - Android 13+ ì—ì„œëŠ” `READ_MEDIA_IMAGES` ê¶Œí•œì´ í•„ìš”
   - ê¶Œí•œ ê±°ë¶€ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±

2. **ì´ë¯¸ì§€ ì„ íƒ ì·¨ì†Œ ì‹œ ì—ëŸ¬**
   - `launchImageLibrary`ì—ì„œ ì·¨ì†Œ ì‹œ `result.didCancel` ì²´í¬ëŠ” ìˆì§€ë§Œ
   - ë‹¤ë¥¸ ì—ëŸ¬ ìƒí™©ì—ì„œ í¬ë˜ì‹œ ë°œìƒ ê°€ëŠ¥

**ì½”ë“œ ìœ„ì¹˜**: `mobile/src/screens/CallbackSettingsScreen.tsx` ë¼ì¸ 243-315
```typescript
const pickAndUploadImage = async () => {
  try {
    const hasPerm = await requestImagePermission();
    if (!hasPerm) {
      Alert.alert('ê¶Œí•œ í•„ìš”', 'ì´ë¯¸ì§€ ì ‘ê·¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
      return;
    }
    
    const result = await launchImageLibrary({...});
    // ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±
  } catch (error) {
    // ì—ëŸ¬ ì²˜ë¦¬ ìˆì§€ë§Œ í¬ë˜ì‹œ ë°©ì§€ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ
  }
}
```

---

### ğŸ“‹ í•´ê²° ë°©ì•ˆ ìš”ì•½

1. **ë¬¸ì ë³´ë‚´ê¸° í™”ë©´ì— ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì¶”ê°€**
   - ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ ì¶”ê°€
   - ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° UI ì¶”ê°€
   - `handleSend`ì—ì„œ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ MMS, ì—†ìœ¼ë©´ SMS ë°œì†¡

2. **ëª…í•¨ ì´ë¯¸ì§€ ë™ê¸°í™” í™•ì¸**
   - ì›¹ì—ì„œ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ê°€ DBì— ì œëŒ€ë¡œ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸
   - ì•±ì—ì„œ ë¡œë“œ ì‹œ ì—ëŸ¬ ë¡œê·¸ í™•ì¸
   - ì´ë¯¸ì§€ URL ìœ íš¨ì„± ê²€ì¦

3. **ì´ë¯¸ì§€ ì„ íƒ í¬ë˜ì‹œ ë°©ì§€**
   - ê¶Œí•œ ìš”ì²­ ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
   - ì´ë¯¸ì§€ ì„ íƒ ì·¨ì†Œ/ì—ëŸ¬ ìƒí™© ì²˜ë¦¬ ê°•í™”
   - try-catchë¡œ ëª¨ë“  ì—ëŸ¬ ì²˜ë¦¬

---

---

## ë¬¸ì œ í•´ê²° ì™„ë£Œ (2025ë…„ 12ì›” 9ì¼ ë°¤)

### âœ… ì™„ë²½í•˜ê²Œ ìˆ˜ì •ëœ ë¬¸ì œë“¤

#### 1. ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì¶”ê°€ ì™„ë£Œ
**íŒŒì¼**: `mobile/src/screens/SendSMSScreen.tsx`

**ìˆ˜ì • ë‚´ìš©**:
- ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ ì¶”ê°€ (ğŸ“· ì´ë¯¸ì§€ ì²¨ë¶€)
- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° UI ì¶”ê°€
- ì´ë¯¸ì§€ ì œê±° ë²„íŠ¼ ì¶”ê°€
- `handleSend`ì—ì„œ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ `sendMmsDirectly`, ì—†ìœ¼ë©´ `sendSmsDirectly` í˜¸ì¶œ
- ì´ë¯¸ì§€ ê¶Œí•œ ìš”ì²­ ë¡œì§ ì¶”ê°€

**ì½”ë“œ ë³€ê²½**:
```typescript
// ì´ë¯¸ì§€ ìƒíƒœ ì¶”ê°€
const [selectedImage, setSelectedImage] = useState<string | null>(null);

// ì´ë¯¸ì§€ ì„ íƒ í•¨ìˆ˜
const handlePickImage = async () => {
  // ê¶Œí•œ ìš”ì²­ â†’ ì´ë¯¸ì§€ ì„ íƒ â†’ ë¡œì»¬ URI ì €ì¥
};

// ë°œì†¡ ì‹œ ì´ë¯¸ì§€ ì²˜ë¦¬
if (selectedImage) {
  await sendMmsDirectly(customer.phone, message, selectedImage);
} else {
  await sendSmsDirectly(customer.phone, message);
}
```

---

#### 2. ë¬¸ì ì¹´ìš´íŒ… ë¬¸ì œ í•´ê²°
**íŒŒì¼**: `mobile/src/screens/SendSMSScreen.tsx`

**ìˆ˜ì • ë‚´ìš©**:
- `incrementSentCount` í˜¸ì¶œ ì¶”ê°€
- `sms_logs`ì— ì„±ê³µ/ì‹¤íŒ¨ ëª¨ë‘ ê¸°ë¡
- `is_mms`, `image_url` í•„ë“œë„ ì €ì¥

**ì½”ë“œ ë³€ê²½**:
```typescript
// ì¼ì¼ í•œë„ ì¹´ìš´íŠ¸ ì¦ê°€
if (user?.id) {
  await incrementSentCount(user.id);
}

// ë°œì†¡ ë¡œê·¸ ê¸°ë¡
await supabase.from('sms_logs').insert({
  user_id: user?.id,
  customer_id: customer.id,
  phone_number: customer.phone.replace(/\D/g, ''),
  message,
  status: 'sent',
  sent_at: new Date().toISOString(),
  is_mms: !!selectedImage,
  image_url: selectedImage || null,
});
```

---

#### 3. AI ê¸°ëŠ¥ ì‘ë™ ë¬¸ì œ í•´ê²°
**íŒŒì¼**: `mobile/src/screens/SendSMSScreen.tsx`

**ìˆ˜ì • ë‚´ìš©**:
- API URL ìˆ˜ì •: `bizconnect-web.vercel.app` â†’ `bizconnect-ten.vercel.app`
- 3ê³³ ëª¨ë‘ ìˆ˜ì • (suggest-message, summarize-conversation)

**ì½”ë“œ ë³€ê²½**:
```typescript
// ìˆ˜ì • ì „
const response = await fetch('https://bizconnect-web.vercel.app/api/ai/suggest-message', {

// ìˆ˜ì • í›„
const response = await fetch('https://bizconnect-ten.vercel.app/api/ai/suggest-message', {
```

---

#### 4. ì´ë¯¸ì§€ ì„ íƒ í¬ë˜ì‹œ ë°©ì§€ ê°•í™”
**íŒŒì¼**: `mobile/src/screens/CallbackSettingsScreen.tsx`

**ìˆ˜ì • ë‚´ìš©**:
- `requestMultiple` ì‚¬ìš©í•˜ì—¬ Android 13+ ê¶Œí•œ ì²˜ë¦¬
- ëª¨ë“  ì—ëŸ¬ ìƒí™©ì— ëŒ€í•œ try-catch ê°•í™”
- ì‚¬ìš©ì ì·¨ì†Œ ì‹œ ì—ëŸ¬ ì—†ì´ ì²˜ë¦¬
- ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

**ì½”ë“œ ë³€ê²½**:
```typescript
const requestImagePermission = async (): Promise<boolean> => {
  // Android 13+ (READ_MEDIA_IMAGES) + Android 12 ì´í•˜ (READ_EXTERNAL_STORAGE) ëª¨ë‘ ì²˜ë¦¬
  const result = await requestMultiple([
    PERMISSIONS.ANDROID.READ_MEDIA_IMAGES,
    PERMISSIONS.ANDROID.READ_EXTERNAL_STORAGE,
  ]);
  // ...
};
```

---

#### 5. ì›¹-ì•± ìë™ ì²˜ë¦¬ ì¬í™œì„±í™” (ì•ˆì „í•˜ê²Œ)
**íŒŒì¼**: `mobile/src/services/taskService.ts`

**ìˆ˜ì • ë‚´ìš©**:
- ì‹¤ì‹œê°„ êµ¬ë…ì—ì„œ ìµœê·¼ 5ë¶„ ì´ë‚´ ìƒì„±ëœ ì‘ì—…ë§Œ ì²˜ë¦¬í•˜ë„ë¡ í•„í„° ì¶”ê°€
- ì˜¤ë˜ëœ ì‘ì—…ì´ ìë™ìœ¼ë¡œ ë°œì†¡ë˜ëŠ” ë¬¸ì œ ë°©ì§€
- `loadPendingTasks`ì—ì„œ í ìë™ ì‹œì‘ ìœ ì§€ (ì›¹ì—ì„œ ë³´ë‚¸ ì‘ì—… ì²˜ë¦¬)

**ì½”ë“œ ë³€ê²½**:
```typescript
// ì‹¤ì‹œê°„ êµ¬ë… ì‹œ ìµœê·¼ 5ë¶„ ì´ë‚´ ì‘ì—…ë§Œ ì²˜ë¦¬
const now = new Date();
const createdAt = new Date(newTask.created_at);
const fiveMinutesAgo = new Date(now.getTime() - 5 * 60 * 1000);

if (newTask.status === 'pending' && createdAt > fiveMinutesAgo) {
  // ì²˜ë¦¬
}
```

---

#### 6. ëª…í•¨ ì´ë¯¸ì§€ ë™ê¸°í™” í™•ì¸
**íŒŒì¼**: `mobile/src/screens/CallbackSettingsScreen.tsx`

**í™•ì¸ ì‚¬í•­**:
- `loadSettings`ì—ì„œ `business_card_image_url` ì œëŒ€ë¡œ ë¡œë“œë¨
- ì´ë¯¸ì§€ URLì´ ìˆìœ¼ë©´ í™”ë©´ì— í‘œì‹œë¨
- ì›¹ì—ì„œ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë„ ë™ì¼í•œ í•„ë“œ ì‚¬ìš©í•˜ë¯€ë¡œ ë™ê¸°í™”ë¨

**ì¶”ê°€ ê°œì„ **:
- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
- ì—…ë¡œë“œ ì„±ê³µ ì‹œ ì¦‰ì‹œ í™”ë©´ì— ë°˜ì˜

---

### ğŸ“‹ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `SendSMSScreen.tsx` | ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì¶”ê°€, ë¬¸ì ì¹´ìš´íŒ…, AI API URL ìˆ˜ì • |
| `CallbackSettingsScreen.tsx` | ì´ë¯¸ì§€ ê¶Œí•œ ìš”ì²­ ê°•í™”, ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  |
| `taskService.ts` | ìµœê·¼ 5ë¶„ ì´ë‚´ ì‘ì—…ë§Œ ì²˜ë¦¬í•˜ë„ë¡ í•„í„° ì¶”ê°€ |

---

### ğŸ¯ í•´ê²°ëœ ë¬¸ì œ ìš”ì•½

1. âœ… **ì´ë¯¸ì§€ íŒŒì¼ì´ ë¬¸ìì— ì•ˆ ê°€ëŠ” ë¬¸ì œ** â†’ ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì¶”ê°€, MMS ë°œì†¡ ë¡œì§ êµ¬í˜„
2. âœ… **ì•±ì—ì„œ ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì—†ìŒ** â†’ ì´ë¯¸ì§€ ì„ íƒ ë²„íŠ¼ ë° ë¯¸ë¦¬ë³´ê¸° UI ì¶”ê°€
3. âœ… **ë¬¸ì ë³´ë‚¸ ì¹´ìš´íŒ… ì•ˆë¨** â†’ `incrementSentCount` í˜¸ì¶œ ë° `sms_logs` ì €ì¥
4. âœ… **ì•±ì—ì„œ AI ì‘ë™ ì•ˆë¨** â†’ API URL ìˆ˜ì •
5. âœ… **ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œ ì•± í¬ë˜ì‹œ** â†’ ê¶Œí•œ ìš”ì²­ ê°•í™”, ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
6. âœ… **ì›¹ì—ì„œ ë¬¸ì ë³´ë‚´ê¸°ê°€ ëŒ€ê¸° ì•ˆë¨** â†’ ìë™ ì²˜ë¦¬ ì¬í™œì„±í™” (ì•ˆì „í•˜ê²Œ)
7. âœ… **ëª…í•¨ ì´ë¯¸ì§€ ë™ê¸°í™”** â†’ ì´ë¯¸ ë™ê¸°í™”ë¨ (í™•ì¸ ì™„ë£Œ)

---

---

## ìµœì¢… ìˆ˜ì • (2025ë…„ 12ì›” 9ì¼ ë°¤ - ë¹Œë“œ ì „)

### ğŸ”§ ì¶”ê°€ë¡œ ìˆ˜ì •ëœ ë¬¸ì œë“¤

#### 1. ë‹¨ì¼ ë¬¸ì ë”œë ˆì´ ë¬¸ì œ í•´ê²°
**íŒŒì¼**: `mobile/src/screens/SendSMSScreen.tsx`

**ë¬¸ì œ**: ë‹¨ì¼ ë¬¸ìì¸ë°ë„ 300ms ë”œë ˆì´ê°€ ë°œìƒ

**ìˆ˜ì •**:
```typescript
// ìˆ˜ì • ì „
successCount++;
await new Promise((res) => setTimeout(res, 300)); // í•­ìƒ ë”œë ˆì´

// ìˆ˜ì • í›„
successCount++;
// ëŒ€ëŸ‰ ë°œì†¡ ì‹œì—ë§Œ ì§€ì—° (ë‹¨ì¼ ë¬¸ìëŠ” ì¦‰ì‹œ ë°œì†¡)
if (selectedCustomersData.length > 1) {
  await new Promise((res) => setTimeout(res, 300));
}
```

---

#### 2. ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œ ë¬¸ì ë°œì†¡ ì•ˆë˜ëŠ” ë¬¸ì œ ê°œì„ 
**íŒŒì¼**: `mobile/src/lib/smsSender.ts`

**ë¬¸ì œ**: ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œ MMS ë°œì†¡ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ

**ìˆ˜ì •**:
- ë¡œì»¬ íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬ ê°œì„  (`file://` ì œê±°)
- ìƒì„¸í•œ ë¡œê·¸ ì¶”ê°€ (ì´ë¯¸ì§€ URL íƒ€ì…, ì—ëŸ¬ ìƒì„¸ ì •ë³´)
- ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

```typescript
// ì´ë¯¸ì§€ URLì´ ë¡œì»¬ íŒŒì¼ì¸ ê²½ìš° file:// ì œê±°
let finalImageUrl = imageUrl;
if (imageUrl.startsWith('file://')) {
  finalImageUrl = imageUrl.replace('file://', '');
  console.log('Converted local file path:', finalImageUrl);
}
```

---

#### 3. ì½œë°± ìì²´ê°€ ì•ˆë˜ëŠ” ë¬¸ì œ ê°œì„ 
**íŒŒì¼**: `mobile/src/lib/callbackManager.ts`

**ë¬¸ì œ**: ì½œë°±ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì›ì¸ íŒŒì•…ì´ ì–´ë ¤ì›€

**ìˆ˜ì •**:
- ìƒì„¸í•œ ë¡œê·¸ ì¶”ê°€ (ê° ë‹¨ê³„ë³„ ìƒíƒœ í™•ì¸)
- ì½œë°± ë¹„í™œì„±í™” ì‹œ ëª…í™•í•œ ë©”ì‹œì§€ í‘œì‹œ
- ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

```typescript
// ì „ì²´ ì½œë°± ê¸°ëŠ¥ OFF ì²´í¬
if (!config.enabled) {
  console.log('âŒ Callback is disabled globally (auto_callback_enabled = false)');
  console.log('ğŸ’¡ To enable: Go to Callback Settings and turn on "ì½œë°± ì„œë¹„ìŠ¤ í™œì„±í™”"');
  return;
}

// ì´ë²¤íŠ¸ íƒ€ì…ë³„ OFF ì²´í¬
if (!isEnabled) {
  console.log(`âŒ Callback for ${eventType} is disabled`);
  console.log(`ğŸ’¡ To enable: Go to Callback Settings and turn on "${eventType}" option`);
  return;
}
```

---

### ğŸ“‹ ìµœì¢… ìˆ˜ì • íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `SendSMSScreen.tsx` | ë‹¨ì¼ ë¬¸ì ë”œë ˆì´ ì œê±° |
| `smsSender.ts` | ì´ë¯¸ì§€ ì²¨ë¶€ ë¡œì»¬ íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬ ê°œì„ , ë¡œê·¸ ê°•í™” |
| `callbackManager.ts` | ì½œë°± ë¡œê·¸ ê°•í™”, ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  |

---

### âœ… ìˆ˜ì • ì™„ë£Œëœ ëª¨ë“  ë¬¸ì œ

1. âœ… **ë‹¨ì¼ ë¬¸ì ë”œë ˆì´** â†’ ë‹¨ì¼ ë¬¸ìëŠ” ì¦‰ì‹œ ë°œì†¡, ë‹¤ëŸ‰ ë°œì†¡ ì‹œì—ë§Œ ë”œë ˆì´
2. âœ… **ì´ë¯¸ì§€ ì²¨ë¶€ ì‹œ ë¬¸ì ë°œì†¡ ì•ˆë¨** â†’ ë¡œì»¬ íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬ ê°œì„ , ìƒì„¸ ë¡œê·¸ ì¶”ê°€
3. âœ… **ì½œë°± ìì²´ê°€ ì•ˆë¨** â†’ ìƒì„¸ ë¡œê·¸ ì¶”ê°€ë¡œ ì›ì¸ íŒŒì•… ê°€ëŠ¥, ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”
4. âœ… **ì´ë¯¸ì§€ ì²¨ë¶€ ê¸°ëŠ¥ ì¶”ê°€** (ì´ì „ ìˆ˜ì •)
5. âœ… **ë¬¸ì ì¹´ìš´íŒ… ë¬¸ì œ í•´ê²°** (ì´ì „ ìˆ˜ì •)
6. âœ… **AI ê¸°ëŠ¥ ì‘ë™ ë¬¸ì œ í•´ê²°** (ì´ì „ ìˆ˜ì •)

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 12ì›” 9ì¼ ë°¤ (ë¹Œë“œ ì „)
**ì‘ì„±ì**: Claude Code
**ë²„ì „**: 1.9.0