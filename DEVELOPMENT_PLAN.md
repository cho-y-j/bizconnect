# 비즈커넥트 상세 개발 플랜

**작성일:** 2025.12.05  
**현재 상태:** 환경설치 완료, 기본 구조 존재  
**목표:** Phase 1 MVP 완성 (1개월 내)

---

## 📊 현재 상태 분석

### ✅ 완료된 항목
- [x] 프로젝트 기본 구조 (web, mobile)
- [x] 모바일: 기본 SMS 전송 기능 (react-native-get-sms-android)
- [x] 모바일: 통화 감지 기능 (react-native-call-detection)
- [x] 모바일: Supabase 실시간 구독 구조
- [x] 웹: 기본 UI (오늘의 할 일 카드)
- [x] 웹: SMS 전송 API 엔드포인트

### ❌ 미완성/수정 필요 항목
- [ ] Supabase 데이터베이스 스키마 설계 및 생성
- [ ] 모바일: 스로틀링 큐 시스템 (15초 간격)
- [ ] 모바일: 일일 한도 제어 (199건/490건)
- [ ] 모바일: 스마트 콜백 로직 (신규/기존 고객 구분)
- [ ] 모바일: 핸드폰 연락처 불러오기 기능
- [ ] 웹: 홈페이지(랜딩 페이지) - 비로그인 사용자용
- [ ] 웹: 로그인/회원가입 페이지 (이메일 + 구글 로그인)
- [ ] 웹: 대시보드(문자전송 관리) - 로그인 후 접근
- [ ] 웹: 실제 데이터 연동 (Supabase)
- [ ] 웹: 고객 관리 기능
- [ ] 웹: 문자 발송 UI 완성
- [ ] 인증 시스템 (사용자별 데이터 분리)
- [ ] 보안 정책 및 구현

---

## 🎯 Phase 1 MVP 개발 계획 (우선순위 순)

### Week 1: 기반 구축 (Foundation)

#### 1.1 Supabase 데이터베이스 설계 및 구축
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. Supabase 프로젝트 생성 (또는 기존 프로젝트 확인)
2. 데이터베이스 스키마 설계:
   ```sql
   -- users 테이블 (인증은 Supabase Auth 사용)
   -- customers 테이블
   -- tasks 테이블 (SMS 발송 작업)
   -- sms_logs 테이블 (발송 기록)
   -- daily_limits 테이블 (일일 한도 추적)
   ```
3. RLS (Row Level Security) 정책 설정
4. 실시간 구독 설정 확인

**예상 소요 시간:** 4-6시간  
**담당:** Backend 설계

**체크리스트:**
- [ ] Supabase 프로젝트 생성/접속
- [ ] `customers` 테이블 생성 (id, name, phone, birthday, industry_type, user_id, created_at)
- [ ] `tasks` 테이블 생성 (id, user_id, customer_id, customer_phone, message_content, type, status, created_at)
- [ ] `sms_logs` 테이블 생성 (id, user_id, task_id, phone_number, message, sent_at, status)
- [ ] `daily_limits` 테이블 생성 (id, user_id, date, sent_count, limit_mode, created_at)
- [ ] RLS 정책 설정 (사용자별 데이터 격리)
- [ ] 실시간 구독 테스트

---

#### 1.2 모바일 앱: 스로틀링 큐 시스템 구현
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. 큐 관리 시스템 구현
   - 대기 중인 SMS 작업을 큐에 저장
   - 15초 간격으로 하나씩 처리
   - 실패 시 재시도 로직
2. 일일 한도 제어 시스템
   - `daily_limits` 테이블과 동기화
   - 안전 모드(199건) / 최대 모드(490건) 선택
   - 한도 초과 시 자동 차단 및 알림

**파일 수정:**
- `mobile/App.tsx` - 큐 시스템 통합
- `mobile/lib/smsQueue.ts` (신규) - 큐 관리 로직
- `mobile/lib/dailyLimit.ts` (신규) - 일일 한도 관리

**예상 소요 시간:** 8-10시간  
**담당:** 모바일 개발

**체크리스트:**
- [ ] `smsQueue.ts` 생성 (큐 관리 클래스)
- [ ] 15초 간격 스로틀링 구현
- [ ] 일일 한도 체크 함수 구현
- [ ] 한도 초과 시 큐 중단 로직
- [ ] 앱 재시작 시 큐 복구 로직
- [ ] 실제 디바이스 테스트

---

#### 1.3 모바일 앱: 스마트 콜백 로직 구현
**우선순위: 높음** ⭐⭐

**작업 내용:**
1. 통화 종료 후 자동 감지
2. 고객 DB 조회 (신규/기존 구분)
3. 템플릿 선택 및 자동 발송
   - 신규 고객: 명함/안내 문자
   - 기존 고객: 맞춤형 안내 문자

**파일 수정:**
- `mobile/App.tsx` - `handleCallEnded` 함수 완성
- `mobile/lib/callbackManager.ts` (신규) - 콜백 로직

**예상 소요 시간:** 6-8시간  
**담당:** 모바일 개발

**체크리스트:**
- [ ] 통화 종료 감지 정확도 테스트
- [ ] Supabase에서 고객 조회 로직
- [ ] 신규/기존 고객 판별 로직
- [ ] 템플릿 선택 로직
- [ ] 자동 발송 테스트

---

### Week 2: 웹 대시보드 완성

#### 2.1 웹: 홈페이지(랜딩 페이지) 구현
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. 비로그인 사용자를 위한 홈페이지(랜딩 페이지) 구현
2. 서비스 소개, 주요 기능, 가격 정보
3. "시작하기" 버튼 → 로그인/회원가입 페이지로 이동
4. 로그인 상태면 자동으로 대시보드로 리다이렉트

**파일 수정:**
- `web/app/page.tsx` - 홈페이지(랜딩 페이지)로 변경
- `web/app/dashboard/page.tsx` (신규) - 문자전송 관리 대시보드 (기존 page.tsx 내용 이동)

**예상 소요 시간:** 4-6시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] 홈페이지 디자인 (히어로 섹션, 기능 소개, 가격)
- [ ] 로그인 상태 체크 및 리다이렉트 로직
- [ ] 반응형 디자인
- [ ] CTA 버튼 (시작하기, 로그인)

---

#### 2.2 웹: 로그인/회원가입 시스템 구현
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. Supabase 인증 설정
2. 이메일/비밀번호 로그인 및 회원가입
3. **구글 소셜 로그인** (OAuth)
4. 회원가입 프로세스 최적화 (최소한의 정보만)
5. 로그인 후 대시보드로 자동 이동

**파일 수정:**
- `web/lib/auth.ts` (신규) - 인증 유틸리티
- `web/app/auth/login/page.tsx` (신규) - 로그인 페이지
- `web/app/auth/signup/page.tsx` (신규) - 회원가입 페이지
- `web/app/auth/callback/page.tsx` (신규) - OAuth 콜백 처리
- `web/middleware.ts` (신규) - 인증 미들웨어

**예상 소요 시간:** 8-10시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] Supabase Auth 설정
- [ ] 이메일/비밀번호 로그인 UI
- [ ] 이메일/비밀번호 회원가입 UI
- [ ] **구글 로그인 버튼 및 OAuth 연동**
- [ ] 비밀번호 재설정 기능
- [ ] 세션 관리 (쿠키/로컬스토리지)
- [ ] 보호된 라우트 미들웨어
- [ ] 에러 처리 (잘못된 비밀번호, 중복 이메일 등)
- [ ] 회원가입 시 기본 설정 자동 생성

**구글 로그인 구현 상세:**
1. Supabase Dashboard에서 Google OAuth Provider 설정
2. Google Cloud Console에서 OAuth 2.0 클라이언트 ID 생성
3. 콜백 URL 설정: `https://your-domain.com/auth/callback`
4. `supabase.auth.signInWithOAuth({ provider: 'google' })` 사용

---

#### 2.3 웹: 대시보드(문자전송 관리) 구현
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. 로그인 후 접근하는 메인 대시보드
2. "오늘의 할 일" 카드 (기존 page.tsx 내용)
3. 실시간 발송 상태 모니터링
4. 빠른 액션 버튼 (문자 발송, 고객 추가)

**파일 수정:**
- `web/app/dashboard/page.tsx` (신규) - 대시보드 메인
- `web/app/dashboard/layout.tsx` (신규) - 대시보드 레이아웃 (네비게이션 포함)

**예상 소요 시간:** 6-8시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] 대시보드 레이아웃 (사이드바/헤더)
- [ ] 오늘의 할 일 카드 (실제 데이터 연동)
- [ ] 발송 통계 위젯
- [ ] 빠른 액션 버튼
- [ ] 로그아웃 기능

---

#### 2.4 웹: 고객 관리 기능
**우선순위: 높음** ⭐⭐

**작업 내용:**
1. 고객 목록 조회
2. 고객 추가/수정/삭제
3. 고객 검색 및 필터링
4. **CSV 일괄 업로드** (대량 고객 등록)

**파일 수정:**
- `web/app/dashboard/customers/page.tsx` (신규) - 고객 목록
- `web/app/dashboard/customers/[id]/page.tsx` (신규) - 고객 상세
- `web/app/dashboard/customers/new/page.tsx` (신규) - 고객 추가
- `web/app/api/customers/route.ts` (신규) - API 엔드포인트
- `web/app/api/customers/upload/route.ts` (신규) - CSV 업로드 API

**예상 소요 시간:** 10-12시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] 고객 목록 페이지 (테이블/카드 뷰)
- [ ] 고객 추가 폼 (단건)
- [ ] **CSV 업로드 기능** (대량 등록)
- [ ] 고객 수정 기능
- [ ] 고객 삭제 기능 (확인 다이얼로그)
- [ ] 검색 및 필터링 (이름, 전화번호, 업종)
- [ ] 페이지네이션

---

#### 2.5 웹: 문자 발송 UI 완성
**우선순위: 높음** ⭐⭐

**작업 내용:**
1. "오늘의 할 일" 실제 데이터 연동
2. 문자 발송 폼 (단건/대량)
3. 발송 기록 조회
4. 실시간 상태 업데이트

**파일 수정:**
- `web/app/dashboard/send/page.tsx` (신규) - 문자 발송 페이지
- `web/app/dashboard/history/page.tsx` (신규) - 발송 기록

**예상 소요 시간:** 10-12시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] 오늘의 할 일 데이터 연동
- [ ] 생일/기념일 자동 감지
- [ ] 문자 발송 폼 (단건)
- [ ] 문자 발송 폼 (대량 - 고객 선택)
- [ ] 발송 기록 페이지 (필터링, 검색)
- [ ] 실시간 상태 업데이트 (Supabase Realtime)
- [ ] 발송 전 미리보기

---

#### 2.6 웹: AI 비서 기능 (문자 메시지 추천)
**우선순위: 높음** ⭐⭐⭐

**작업 내용:**
1. DeepSeek API 연동
2. 고객별 발송 내역 분석
3. AI 기반 메시지 추천 (3가지 버전: 정중한, 친근한, 간결한)
4. 문자 보내기 페이지에 AI 버튼 추가
5. 고객 상세 페이지에 AI 버튼 추가

**파일 수정:**
- `web/src/app/api/ai/suggest-message/route.ts` (신규) - AI API 엔드포인트
- `web/src/components/AIMessageSuggestions.tsx` (신규) - AI 추천 UI 컴포넌트
- `web/src/app/dashboard/send/page.tsx` (수정) - AI 버튼 추가
- `web/src/app/dashboard/customers/[id]/page.tsx` (수정) - AI 버튼 추가

**필요 라이브러리:**
- `openai`: DeepSeek API 호출용 (OpenAI 호환)

**예상 소요 시간:** 8-10시간  
**담당:** 웹 개발

**체크리스트:**
- [ ] DeepSeek API 키 환경 변수 설정
- [ ] OpenAI SDK 설치
- [ ] AI API 엔드포인트 생성
- [ ] 프롬프트 엔지니어링 (과거 대화 이력 + 현재 상황)
- [ ] 발송 내역 조회 로직 (최근 3개)
- [ ] AI 추천 모달 컴포넌트 구현
- [ ] 3가지 버전 표시 및 선택 기능
- [ ] 메시지 입력란에 자동 입력 기능
- [ ] 에러 처리 및 로딩 상태

**상세 플랜:** `AI_ASSISTANT_PLAN.md` 참고

---

#### 1.4 모바일 앱: 핸드폰 연락처 불러오기 기능
**우선순위: 높음** ⭐⭐

**작업 내용:**
1. 안드로이드 연락처 권한 요청
2. 연락처 목록 불러오기
3. Supabase 고객 DB와 동기화
4. 중복 체크 및 병합 로직
5. 연락처 선택 UI

**파일 수정:**
- `mobile/App.tsx` - 연락처 권한 추가
- `mobile/lib/contactsManager.ts` (신규) - 연락처 관리
- `mobile/screens/ContactsSyncScreen.tsx` (신규) - 연락처 동기화 화면

**필요 라이브러리:**
- `react-native-contacts`: 연락처 읽기

**예상 소요 시간:** 8-10시간  
**담당:** 모바일 개발

**체크리스트:**
- [ ] 연락처 읽기 권한 요청
- [ ] 연락처 목록 불러오기
- [ ] 전화번호 정규화 (010-1234-5678 → 01012345678)
- [ ] Supabase 고객 DB와 비교
- [ ] 중복 체크 로직
- [ ] 신규 연락처 자동 등록 옵션
- [ ] 연락처 선택 UI (체크박스)
- [ ] 일괄 동기화 기능
- [ ] 동기화 진행 상태 표시

---

### Week 3: 통합 테스트 및 버그 수정

#### 3.1 전체 플로우 테스트
**우선순위: 최상위** ⭐⭐⭐

**테스트 시나리오:**
1. 웹에서 고객 추가
2. 웹에서 문자 발송 요청
3. 모바일 앱에서 자동 수신 및 발송
4. 발송 상태 실시간 업데이트 확인
5. 일일 한도 초과 시 차단 확인
6. 통화 종료 후 자동 콜백 확인

**예상 소요 시간:** 8-10시간  
**담당:** QA 및 버그 수정

---

#### 3.2 성능 최적화
**우선순위: 중간** ⭐

**작업 내용:**
1. 모바일 앱 배터리 최적화
2. 네트워크 요청 최소화
3. Supabase 쿼리 최적화

**예상 소요 시간:** 4-6시간  
**담당:** 최적화

---

### Week 4: 배포 준비

#### 4.1 모바일 앱 빌드 및 배포
**우선순위: 최상위** ⭐⭐⭐

**작업 내용:**
1. Android APK 빌드
2. 서명 설정
3. 배포 준비 (직접 전달용)

**예상 소요 시간:** 4-6시간  
**담당:** 모바일 개발

**체크리스트:**
- [ ] Release 빌드 설정
- [ ] APK 서명
- [ ] 테스트 디바이스 설치 확인
- [ ] 배포 가이드 작성

---

#### 4.2 웹 대시보드 배포
**우선순위: 높음** ⭐⭐

**작업 내용:**
1. Vercel 배포 설정
2. 환경 변수 설정
3. 도메인 연결 (선택)

**예상 소요 시간:** 2-4시간  
**담당:** 웹 개발

---

## 📋 상세 작업 목록 (체크리스트)

### 데이터베이스 설계
- [ ] Supabase 프로젝트 생성/확인
- [ ] `customers` 테이블 생성
- [ ] `tasks` 테이블 생성
- [ ] `sms_logs` 테이블 생성
- [ ] `daily_limits` 테이블 생성
- [ ] RLS 정책 설정
- [ ] 인덱스 최적화
- [ ] 실시간 구독 테스트

### 모바일 앱
- [ ] 스로틀링 큐 시스템 구현
- [ ] 일일 한도 제어 구현
- [ ] 스마트 콜백 로직 구현
- [ ] **핸드폰 연락처 불러오기 기능**
- [ ] 권한 요청 UI 개선
- [ ] 발송 통계 UI
- [ ] 에러 처리 강화
- [ ] 배터리 최적화
- [ ] 실제 디바이스 테스트

### 웹 대시보드
- [ ] **홈페이지(랜딩 페이지) 구현**
- [ ] **로그인/회원가입 시스템 (구글 로그인 포함)**
- [ ] **대시보드 메인 페이지**
- [ ] 인증 시스템 구현
- [ ] 고객 관리 기능 (CSV 업로드 포함)
- [ ] 문자 발송 UI
- [ ] 발송 기록 조회
- [ ] 오늘의 할 일 연동
- [ ] 실시간 상태 업데이트
- [ ] 반응형 디자인 확인
- [ ] 에러 처리

### 통합 및 테스트
- [ ] 전체 플로우 테스트
- [ ] 성능 테스트
- [ ] **보안 검토 및 취약점 점검**
- [ ] 사용자 가이드 작성

### 보안
- [ ] 데이터 암호화 (전송 중, 저장 시)
- [ ] 인증 토큰 관리
- [ ] RLS 정책 검증
- [ ] API 엔드포인트 보안
- [ ] 개인정보 보호 정책 구현

### 배포
- [ ] 모바일 APK 빌드
- [ ] 웹 배포 (Vercel)
- [ ] 환경 변수 설정
- [ ] 배포 가이드 작성

---

## 🔧 기술 스택 상세

### 모바일 (React Native)
- **핵심 라이브러리:**
  - `react-native-get-sms-android`: SMS 발송
  - `react-native-call-detection`: 통화 감지
  - `react-native-contacts`: 연락처 읽기
  - `@supabase/supabase-js`: 백엔드 연동
  - `react-native-background-task`: 백그라운드 작업 (선택)

### 웹 (Next.js)
- **핵심 라이브러리:**
  - `@supabase/supabase-js`: 백엔드 연동
  - `@supabase/auth-helpers-nextjs`: 인증
  - `tailwindcss`: 스타일링
  - `react-hook-form`: 폼 관리
  - `papaparse`: CSV 파싱 (고객 일괄 업로드)

### 백엔드 (Supabase)
- PostgreSQL 데이터베이스
- 실시간 구독 (Realtime)
- 인증 (Auth)
- 스토리지 (향후 이미지 저장용)

---

## ⚠️ 주의사항 및 리스크

### 기술적 리스크
1. **안드로이드 SMS 제한:**
   - 대응: 스로틀링 + 일일 한도 제어
   - 모니터링: 발송 실패율 추적

2. **Supabase 실시간 구독 안정성:**
   - 대응: 폴링 백업 로직 구현
   - 재연결 로직 강화

3. **배터리 소모:**
   - 대응: 백그라운드 작업 최적화
   - 사용자 설정 옵션 제공

### 비즈니스 리스크
1. **통신사 제재:**
   - 대응: 안전 모드 기본 설정
   - 사용자 교육 강화

2. **사용자 이탈:**
   - 대응: 초간단 UX 유지
   - 온보딩 프로세스 개선

---

## 📅 일정 요약

| 주차 | 주요 작업 | 마일스톤 |
|------|----------|---------|
| Week 1 | DB 구축, 스로틀링, 콜백 | 핵심 기능 완성 |
| Week 2 | 웹 인증, 고객 관리, 발송 UI | 웹 대시보드 완성 |
| Week 3 | 통합 테스트, 버그 수정 | 안정화 |
| Week 4 | 배포 준비 및 배포 | MVP 출시 |

---

## 🚀 다음 단계 (Phase 2 준비)

Phase 1 완료 후:
1. 사용자 피드백 수집
2. AI 디자인 스튜디오 기획
3. 업종별 템플릿 설계
4. 결제 시스템 연동 검토

---

**마지막 업데이트:** 2025.12.05  
**다음 리뷰:** Week 1 완료 후

